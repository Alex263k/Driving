<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Driving.StartPage"
             BackgroundColor="Black"
             NavigationPage.HasNavigationBar="False">

    <Grid>
        <!-- Garage background -->
        <BoxView>
            <BoxView.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                    <GradientStop Color="#0f172a" Offset="0.0"/>
                    <GradientStop Color="#1e293b" Offset="0.5"/>
                    <GradientStop Color="#0f172a" Offset="1.0"/>
                </LinearGradientBrush>
            </BoxView.Background>
        </BoxView>

        <!-- Main Content -->
        <Grid RowDefinitions="Auto,*,Auto" 
              Padding="20"
              RowSpacing="20">

            <!-- Header with Stats -->
            <Border Grid.Row="0"
                   BackgroundColor="#334155"
                   Stroke="#475569"
                   StrokeThickness="2"
                   StrokeShape="RoundRectangle 10"
                   Padding="15">
                <Grid ColumnDefinitions="*,*,*" ColumnSpacing="20">
                    <!-- Coins -->
                    <VerticalStackLayout Grid.Column="0" Spacing="2">
                        <Label Text="🪙" 
                               FontSize="24"
                               HorizontalTextAlignment="Center"/>
                        <Label x:Name="CoinsLabel" 
                               Text="0" 
                               TextColor="White" 
                               FontSize="18"
                               FontAttributes="Bold"
                               HorizontalTextAlignment="Center"/>
                    </VerticalStackLayout>

                    <!-- High Score -->
                    <VerticalStackLayout Grid.Column="1" Spacing="2">
                        <Label Text="🏆" 
                               FontSize="24"
                               HorizontalTextAlignment="Center"/>
                        <Label x:Name="HighScoreLabel" 
                               Text="0" 
                               TextColor="White" 
                               FontSize="18"
                               FontAttributes="Bold"
                               HorizontalTextAlignment="Center"/>
                    </VerticalStackLayout>

                    <!-- Games Played -->
                    <VerticalStackLayout Grid.Column="2" Spacing="2">
                        <Label Text="🎮" 
                               FontSize="24"
                               HorizontalTextAlignment="Center"/>
                        <Label x:Name="GamesPlayedLabel" 
                               Text="0" 
                               TextColor="White" 
                               FontSize="18"
                               FontAttributes="Bold"
                               HorizontalTextAlignment="Center"/>
                    </VerticalStackLayout>
                </Grid>
            </Border>

            <!-- Car Selection Area -->
            <Grid Grid.Row="1"
                  RowDefinitions="Auto,Auto,Auto,Auto"
                  RowSpacing="10"
                  VerticalOptions="Center">

                <!-- Car Name -->
                <Label Grid.Row="0"
                       x:Name="CarNameLabel"
                       Text="BASIC CAR"
                       TextColor="White"
                       FontSize="28"
                       FontAttributes="Bold"
                       HorizontalTextAlignment="Center"
                       Margin="0,0,0,20"/>

                <!-- Car Display -->
                <Border Grid.Row="1"
                       BackgroundColor="#475569"
                       Stroke="#64748b"
                       StrokeThickness="2"
                       StrokeShape="RoundRectangle 20"
                       HeightRequest="180"
                       WidthRequest="280"
                       HorizontalOptions="Center"
                       VerticalOptions="Center">

                    <!-- Car with shadow effect -->
                    <Grid x:Name="CarDisplayGrid"
                          HorizontalOptions="Center"
                          VerticalOptions="Center">

                        <!-- Car shadow -->
                        <BoxView Color="Black"
                                 Opacity="0.4"
                                 WidthRequest="120"
                                 HeightRequest="60"
                                 CornerRadius="12"
                                 TranslationY="8"
                                 TranslationX="6"/>

                        <!-- Car body -->
                        <BoxView x:Name="CarBody"
                                 Color="LimeGreen"
                                 WidthRequest="120"
                                 HeightRequest="60"
                                 CornerRadius="12"/>

                        <!-- Car windows -->
                        <BoxView Color="#e0f2fe"
                                 WidthRequest="60"
                                 HeightRequest="30"
                                 CornerRadius="6"
                                 TranslationY="-12"/>

                        <!-- Wheels -->
                        <BoxView Color="#1e293b"
                                 WidthRequest="18"
                                 HeightRequest="18"
                                 CornerRadius="9"
                                 TranslationY="25"
                                 TranslationX="-35"/>

                        <BoxView Color="#1e293b"
                                 WidthRequest="18"
                                 HeightRequest="18"
                                 CornerRadius="9"
                                 TranslationY="25"
                                 TranslationX="35"/>

                        <!-- Custom Image Preview -->
                        <Image x:Name="CustomCarImage"
                               WidthRequest="120"
                               HeightRequest="60"
                               IsVisible="False"
                               Aspect="AspectFill"/>
                    </Grid>
                </Border>

                <!-- Upload Button for Custom Skin -->
                <Button Grid.Row="2"
                        x:Name="UploadCustomButton"
                        Text="📁 ЗАГРУЗИТЬ СВОЙ СКИН"
                        Clicked="OnUploadCustomClicked"
                        BackgroundColor="#8b5cf6"
                        TextColor="White"
                        FontSize="14"
                        HeightRequest="40"
                        CornerRadius="20"
                        HorizontalOptions="Center"
                        WidthRequest="240"
                        IsVisible="False"
                        Margin="0,10,0,0"/>

                <!-- Car Navigation -->
                <Grid Grid.Row="3"
                      ColumnDefinitions="*,Auto,*"
                      ColumnSpacing="20"
                      HorizontalOptions="Center"
                      VerticalOptions="Center">

                    <Button x:Name="PrevCarButton"
                            Grid.Column="0"
                            Text="◀"
                            Clicked="OnPrevCarClicked"
                            BackgroundColor="#475569"
                            TextColor="White"
                            FontSize="24"
                            WidthRequest="60"
                            HeightRequest="60"
                            CornerRadius="30"
                            HorizontalOptions="End"/>

                    <Label Grid.Column="1"
                           x:Name="CarEmojiLabel"
                           Text="🚗"
                           FontSize="32"
                           HorizontalTextAlignment="Center"
                           VerticalTextAlignment="Center"/>

                    <Button x:Name="NextCarButton"
                            Grid.Column="2"
                            Text="▶"
                            Clicked="OnNextCarClicked"
                            BackgroundColor="#475569"
                            TextColor="White"
                            FontSize="24"
                            WidthRequest="60"
                            HeightRequest="60"
                            CornerRadius="30"
                            HorizontalOptions="Start"/>
                </Grid>
            </Grid>

            <!-- Action Buttons -->
            <Grid Grid.Row="2" ColumnDefinitions="*,*" ColumnSpacing="15">
                <!-- Upgrades Button -->
                <Button x:Name="UpgradesButton"
                        Grid.Column="0"
                        Text="⚡ UPGRADES"
                        Clicked="OnUpgradesClicked"
                        BackgroundColor="#3b82f6"
                        TextColor="White" 
                        FontSize="20"
                        HeightRequest="55" 
                        CornerRadius="27" 
                        FontAttributes="Bold"/>

                <!-- Start Game Button -->
                <Button Grid.Column="1"
                        Text="🏁 START"
                        Clicked="OnStartClicked"
                        BackgroundColor="#ef4444"
                        TextColor="White" 
                        FontSize="20"
                        HeightRequest="55" 
                        CornerRadius="27" 
                        FontAttributes="Bold"/>
            </Grid>
        </Grid>
    </Grid>
</ContentPage>